services:
  mongo:
    image: mongo:latest
    container_name: mongo
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

  parse-server:
    image: parseplatform/parse-server:latest
    container_name: parse-server
    environment:
      - PARSE_SERVER_DATABASE_URI=mongodb://mongo/parse
      - PARSE_SERVER_APPLICATION_ID=xIlTzM1zXBa9pwgltnURbNMX2CPXBFQEDRtc0Cxp
      - PARSE_SERVER_MASTER_KEY=1EizsYuqYCuEjNE6sxjbaJSzSivnFtCr75o4dM54
      - PARSE_SERVER_CLIENT_KEY=1EizsYuqYCuEjNE6sxjbaJSzSivnFtCr75o4dM54
      - PARSE_SERVER_JAVASCRIPT_KEY=DNFx43zpqKGltPE4Qpv4VTWO6iqqUXy9nkXgdngh
      - PARSE_SERVER_REST_API_KEY=lLHiAjfwb3SrSOMsy4tKnl1opyOzbyPLpDlmRYHK
      - PARSE_SERVER_FILE_KEY=5Iv6qtbBMNdPgIvSWEZ4MF2o4doPUp1SbPHUzLbG
      - PARSE_SERVER_URL=http://localhost:1337/parse
      - PARSE_SERVER_MASTER_KEY_IPS=0.0.0.0/0
    ports:
      - "1337:1337"
    depends_on:
      - mongo

  parse-dashboard:
    image: parseplatform/parse-dashboard:latest
    container_name: parse-dashboard
    environment:
      - PARSE_DASHBOARD_ALLOW_INSECURE_HTTP=true
    volumes:
      - ./parse-dashboard-config.json:/parse-dashboard-config.json
    command: parse-dashboard --config /parse-dashboard-config.json
    ports:
      - "4040:4040"
    depends_on:
      - parse-server

volumes:
  mongo_data:
